webpackJsonp([8],{1216:function(e,t,n){n(408),e.exports=n(394)},394:function(e,t,n){"use strict";(function(e,t){n(685),function(e){var t=/^(\S*)/;e.truncate=function(t,n){return e("<div></div>").append(t).truncate(n).html()},e.fn.truncate=function(n){e.isNumeric(n)&&(n={length:n});var o=e.extend({},e.truncate.defaults,n);return this.each(function(){var n=e(this);o.noBreaks&&n.find("br").replaceWith(" ");var i=n.text(),a=i.length-o.length;if(o.stripTags&&n.text(i),o.words&&a>0){var s=i.slice(0,o.length).replace(/(\s*\S+|\s)$/,"").length;a=o.keepFirstWord&&0===s?i.length-t.exec(i)[0].length-1:i.length-s-1}a<0||!a&&!o.truncated||e.each(n.contents().get().reverse(),function(t,n){var i=e(n),s=i.text(),r=s.length;return r<=a?(o.truncated=!0,a-=r,void i.remove()):3===n.nodeType?(o.finishBlock?e(n.splitText(r)).replaceWith(o.ellipsis):e(n.splitText(r-a-1)).replaceWith(o.ellipsis),!1):(i.truncate(e.extend(o,{length:r-a})),!1)})})},e.truncate.defaults={stripTags:!1,words:!1,keepFirstWord:!1,noBreaks:!1,finishBlock:!1,length:1/0,ellipsis:"…"}}(e),t("document").ready(function(){function e(){t(i).each(function(){var e=t(this).find("."+r).text();t(this).find(l).html(e)})}var n=t(".js-fixed_header"),o=t(window);o.scroll(function(){o.scrollTop()>130?n.addClass("b-header-fixed_type_shown"):n.removeClass("b-header-fixed_type_shown")});var i=".js-sorting-tabs",a=t(".js-sorting_tabs_list"),s=t(".js-sorting_tabs_item"),r=a.data("itemClassactive"),l=".js-sorting_tabs_button",c=a.data("classactive");e(),t(s).on("click",function(){t(this).addClass(r).siblings(this).removeClass(r).parent().removeClass(c),e()}),t(l).on("click",function(){t(this).parent().next().toggleClass(c)}),t(".js-ga-onclick").on("click",function(){var e=t(this).data();if(ga)return ga("send","event",e.eventCategory,e.eventAction,e.eventLabel,1);console.log("GA lib is not loaded")}),t(".js-link").on("click",function(e){e.preventDefault(),e.stopPropagation();var n=t(this).data("href");n&&(window.location=n)}),t.extend(t.lazyLoadXT,{selector:"img.js-lazy-img",autoInit:!1,oninit:function(){},onerror:function(){var e=t(this).data("placeholder");t(this).attr("src",e).addClass("lazy-error")}}),t(".js-toggle-favourite").on("click",function(e){e.preventDefault();var n=t(e.currentTarget).data();t.ajax({url:"/util/toggle_favourite",type:"POST",data:{product_id:n.productId,csrfmiddlewaretoken:n.csrfmiddlewaretoken},success:function(e){e&&e.success&&document.location.reload()}})}),t(".js-toggle-pin").on("click",function(e){e.preventDefault();var n=t(e.currentTarget).data();t.ajax({url:n.url,type:"POST",data:{product_id:n.productId,csrfmiddlewaretoken:n.csrfmiddlewaretoken},success:function(e){e.success&&window.location.reload()}})}),t(".js-profile-menu").on("click",function(e){t(this).toggleClass("b-header-links__profile_state_opened"),t(".js-catalog-menu").removeClass("b-nav__item_state_opened"),t(".js-catalog-mobile-menu").removeClass("b-nav__mobile-menu_state_opened")}),t(".js-catalog-menu").on("click",function(e){t(this).toggleClass("b-nav__item_state_opened"),t(".js-profile-menu").removeClass("b-header-links__profile_state_opened")}),t(".js-catalog-mobile-menu").on("click",function(e){t(this).toggleClass("b-nav__mobile-menu_state_opened"),t(".js-profile-menu").removeClass("b-header-links__profile_state_opened")}),t(document).on("click",function(e){var n=t(".js-dropdown");n===e.target||n.has(e.target).length||(t(".js-profile-menu").removeClass("b-header-links__profile_state_opened"),t(".js-catalog-menu").removeClass("b-nav__item_state_opened"),t(".js-catalog-mobile-menu").removeClass("b-nav__mobile-menu_state_opened"))}),t(".js-toggle").click(function(){var e=t(this);t("#"+e.data("targetId")).toggleClass(e.data("toggleClassname"))}),t(".js-promo-section").click(function(e){var n=t(this).parent();n.toggleClass(n.data("classactive")),n.siblings().removeClass(n.data("classactive"))}),t(".js-truncated").each(function(){var e=t(this),n=parseInt(t(this).data("length")),o=t(this).data("text-class");if(!(e.text().length<n)){var i=t.truncate(e.html(),{length:n,ellipsis:"..."}),a=t(i),s=t(o,e).hide();t(this).append(a),t("p:last-child",a).append(' <a class="b-link_theme_green" href="#more content">читать дальше</a>'),t("p:last-child",s).append(' <a class="b-link_theme_green" href="#less content">свернуть</a>'),a.find("a:last").click(function(){return a.hide(),s.show(),!1}),s.find("a:last").click(function(){return a.show(),s.hide(),!1})}}),t(".js-collapse").click(function(e){e.preventDefault();var n=t(this);t("#"+n.data("targetId")).toggleClass(n.data("toggleClassname")),t("#"+n.data("sourceId")).hide()}),t(".js-tabs_button").on("click",function(){var e=t(this).next();e.toggleClass(e.data("classactive"))}),t(".js-logout-link").on("click",function(){return t("#"+t(this).data("form-id")).submit(),!1}),t(".js-thread-action").on("click",function(){return t("#"+t(this).data("form-id")).submit(),!1}),t(".js-photo-input").on("change",function(){t(".js-photo-input-name").text(t(this)[0].files[0].name),t(".js-photo-help-text").show()}),t(".js-sort-select").on("change",function(){var e=t(this).data("qs");e?e+="&sort="+t(this).val():e="?sort="+t(this).val(),window.location.search=e})})}).call(t,n(39),n(39))},408:function(e,t){/*!
 * @copyright Copyright (c) 2017 IcoMoon.io
 * @license   Licensed under MIT license
 *            See https://github.com/Keyamoon/svgxuse
 * @version   1.2.4
 */
!function(){"use strict";if("undefined"!=typeof window&&window.addEventListener){var e,t,n=Object.create(null),o=function(){clearTimeout(t),t=setTimeout(e,100)},i=function(){},a=function(){var e;window.addEventListener("resize",o,!1),window.addEventListener("orientationchange",o,!1),window.MutationObserver?(e=new MutationObserver(o),e.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),i=function(){try{e.disconnect(),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)}catch(e){}}):(document.documentElement.addEventListener("DOMSubtreeModified",o,!1),i=function(){document.documentElement.removeEventListener("DOMSubtreeModified",o,!1),window.removeEventListener("resize",o,!1),window.removeEventListener("orientationchange",o,!1)})},s=function(e){function t(e){var t;return void 0!==e.protocol?t=e:(t=document.createElement("a"),t.href=e),t.protocol.replace(/:/g,"")+t.host}var n,o,i;return window.XMLHttpRequest&&(n=new XMLHttpRequest,o=t(location),i=t(e),n=void 0===n.withCredentials&&""!==i&&i!==o?XDomainRequest||void 0:XMLHttpRequest),n},r="http://www.w3.org/1999/xlink";e=function(){function e(){0===(w-=1)&&(i(),a())}function t(e){return function(){!0!==n[e.base]&&(e.isXlink?e.useEl.setAttributeNS(r,"xlink:href","#"+e.hash):e.useEl.setAttribute("href","#"+e.hash))}}function o(t){return function(){t.onerror=null,t.ontimeout=null,e()}}var l,c,d,u,f,h,g,v,m,p,w=0,b=!1;for(i(),m=document.getElementsByTagName("use"),f=0;f<m.length;f+=1){try{c=m[f].getBoundingClientRect()}catch(e){c=!1}u=m[f].getAttribute("href"),u?b=!1:(u=m[f].getAttributeNS(r,"href"),b=!0),v=u&&u.split?u.split("#"):["",""],l=v[0],d=v[1],h=c&&0===c.left&&0===c.right&&0===c.top&&0===c.bottom,c&&0===c.width&&0===c.height&&!h?l.length&&(p=n[l],!0!==p&&setTimeout(t({useEl:m[f],base:l,hash:d,isXlink:b}),0),void 0===p&&void 0!==(g=s(l))&&(p=new g,n[l]=p,p.onload=function(t){return function(){var n,o=document.body,i=document.createElement("x");t.onload=null,i.innerHTML=t.responseText,n=i.getElementsByTagName("svg")[0],n&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",o.insertBefore(n,o.firstChild)),e()}}(p),p.onerror=o(p),p.ontimeout=o(p),p.open("GET",l),p.send(),w+=1)):h?l.length&&n[l]&&setTimeout(t({useEl:m[f],base:l,hash:d,isXlink:b}),0):void 0===n[l]?n[l]=!0:n[l].onload&&(n[l].abort(),delete n[l].onload,n[l]=!0)}m="",w+=1,e()};var l;l=function(){window.removeEventListener("load",l,!1),t=setTimeout(e,0)},"complete"!==document.readyState?window.addEventListener("load",l,!1):l()}}()},685:function(e,t,n){(function(e){/*! Lazy Load XT v1.1.0 2016-01-12
 * http://ressio.github.io/lazy-load-xt
 * (C) 2016 RESS.io
 * Licensed under MIT */
!function(e,t,n,o){function i(e,t){return e[t]===o?w[t]:e[t]}function a(){var e=t.pageYOffset;return e===o?m.scrollTop:e}function s(e,t){var n=w["on"+e];n&&(k(n)?n.call(t[0]):(n.addClass&&t.addClass(n.addClass),n.removeClass&&t.removeClass(n.removeClass))),t.trigger("lazy"+e,[t]),d()}function r(t){s(t.type,e(this).off(v,r))}function l(n){if(y.length){n=n||w.forceLoad,j=1/0;var o,i,l=a(),c=t.innerHeight||m.clientHeight,d=t.innerWidth||m.clientWidth;for(o=0,i=y.length;o<i;o++){var u,f=y[o],p=f[0],b=f[h],_=!1,C=n||A(p,g)<0;if(e.contains(m,p)){if(n||!b.visibleOnly||p.offsetWidth||p.offsetHeight){if(!C){var E=p.getBoundingClientRect(),T=b.edgeX,x=b.edgeY;u=E.top+l-x-c,C=u<=l&&E.bottom>-x&&E.left<=d+T&&E.right>-T}if(C){f.on(v,r),s("show",f);var L=b.srcAttr,z=k(L)?L(f):p.getAttribute(L);z&&(p.src=z),_=!0}else u<j&&(j=u)}}else _=!0;_&&(A(p,g,0),y.splice(o--,1),i--)}i||s("complete",e(m))}}function c(){E>1?(E=1,l(),setTimeout(c,w.throttle)):E=0}function d(e){y.length&&(e&&"scroll"===e.type&&e.currentTarget===t&&j>=a()||(E||setTimeout(c,0),E=2))}function u(){_.lazyLoadXT()}function f(){l(!0)}var h="lazyLoadXT",g="lazied",v="load error",m=n.documentElement||n.body,p=t.onscroll===o||!!t.operamini||!m.getBoundingClientRect,w={autoInit:!0,selector:"img[data-src]",blankImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",throttle:99,forceLoad:p,loadEvent:"pageshow",updateEvent:"load orientationchange resize scroll touchmove focus",forceEvent:"lazyloadall",oninit:{removeClass:"lazy"},onshow:{addClass:"lazy-hidden"},onload:{removeClass:"lazy-hidden",addClass:"lazy-loaded"},onerror:{removeClass:"lazy-hidden"},checkDuplicates:!0},b={srcAttr:"data-src",edgeX:0,edgeY:0,visibleOnly:!0},_=e(t),k=e.isFunction,C=e.extend,A=e.data||function(t,n){return e(t).data(n)},y=[],j=0,E=0;e[h]=C(w,b,e[h]),e.fn[h]=function(n){n=n||{};var o,a=i(n,"blankImage"),r=i(n,"checkDuplicates"),l=i(n,"scrollContainer"),c=i(n,"show"),u={};e(l).on("scroll",d);for(o in b)u[o]=i(n,o);return this.each(function(o,i){if(i===t)e(w.selector).lazyLoadXT(n);else{var l=r&&A(i,g),f=e(i).data(g,c?-1:1);if(l)return void d();a&&"IMG"===i.tagName&&!i.src&&(i.src=a),f[h]=C({},u),s("init",f),y.push(f),d()}})},e(n).ready(function(){s("start",_),_.on(w.updateEvent,d).on(w.forceEvent,f),e(n).on(w.updateEvent,d),w.autoInit&&(_.on(w.loadEvent,u),u())})}(e||window.Zepto||window.$,window,document)}).call(t,n(39))}},[1216]);
//# sourceMappingURL=global.dac149cc0cf366e35df2.js.map